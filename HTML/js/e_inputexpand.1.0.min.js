/*
 * ************************************************************* *
 * Name       : eInputExpand                                     *
 * Date       : July 2011                                        *
 * Owner      : CreativeMilk                                     *
 * Url        : www.creativemilk.net                             *
 * Version    : 1.0                                              *
 * Updated    : --/--/----                                       *
 * Developer  : Mark                                             *
 * Dependency :                                                  *
 * Lib        : jQuery 1.7+                                      *
 * Licence    : NOT free                                         *
 * This is part of a themeforest file                            *
 * ************************************************************* *
 */

;(function(a,b,c,d){a.fn.eInputExpand=function(d){d=a.extend({},a.fn.eInputExpand.options,d);return this.each(function(){var e=a(this);if("ontouchstart"in b||b.DocumentTouch&&c instanceof DocumentTouch){var f="click tap"}else{var f="click"}e.on(f,this,function(b){var c=a(this);if(typeof d.before=="function"){d.before.call(this)}a("input").blur();var e=d.height;var f=d.width;var g=e/2;var h=f/2;var i=e-61;if(a("#e-inputexpand").length<1){a("body").append('<div id="e-inputexpand" style="height:'+e+"px;width:"+f+"px;margin:-"+g+"px 0 0 -"+h+'px">'+'<div id="e-inputexpand-content">'+'<textarea id="e-inputexpand-textarea" name="" style="height:'+i+'px"></textarea>'+"</div>"+"<footer>"+'<a href="javascript:void(0);" id="e-inputexpand-submit">'+d.labelSubmit+"</a>"+'<a href="javascript:void(0);" id="e-inputexpand-cancel">'+d.labelCancel+"</a>"+"</footer>"+"</div>"+'<div id="e-inputexpand-overlay"></div>');a("div#e-inputexpand-overlay").fadeTo(d.speed,d.opacity,function(){a("textarea#e-inputexpand-textarea").html(c.val());a("div#e-inputexpand").fadeIn(d.speed)});c.addClass("e-inputexpand-source")}b.preventDefault()});a("body").on(f,"div#e-inputexpand a",function(b){if(a(b.target).is("a#e-inputexpand-submit")){var c=a("textarea#e-inputexpand-textarea").val();a("input.e-inputexpand-source").val(c)}a("input.e-inputexpand-source").blur().removeClass("e-inputexpand-source");a("div#e-inputexpand-overlay, div#e-inputexpand").fadeOut(d.speed,function(){a(this).remove()});if(typeof d.after=="function"){d.after.call(this)}b.preventDefault()});if(d.escKey===true){a(c).keypress(function(b){if(b.keyCode==27){a("div#e-inputexpand-overlay, div#e-inputexpand").fadeOut(d.speed,function(){a(this).remove()});if(typeof d.after=="function"){d.after.call(this)}}})}})};a.fn.eInputExpand.options={width:320,height:220,labelSubmit:"Insert",labelCancel:"Cancel",opacity:.5,escKey:true,before:function(){},after:function(){}}})(jQuery,window,document)