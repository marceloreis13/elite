/*
 * ************************************************************* *
 * Name       : eLiveSearch                                      *
 * Date       : September 2011                                   *
 * Owner      : CreativeMilk                                     *
 * Url        : www.creativemilk.net                             *
 * Version    : 1.0                                              *
 * Updated    : --/--/----                                       *
 * Developer  : Mark                                             *
 * Dependency :                                                  *
 * Lib        : jQuery 1.7+                                      *
 * Licence    : NOT free                                         *
 * This is part of a themeforest file                            *
 * ************************************************************* *
 */

;(function(a,b,c,d){a.fn.eLiveSearch=function(d){d=a.extend({},a.fn.eLiveSearch.options,d);return this.each(function(){function o(b){if(d.file.length>1){var c=d.file}else{if(e.prop("action").length){var c=e.attr("action")}else{alert("There is no search template(file) defined!");var c=""}}var f=[d.param1,d.param2,d.param3,d.param4,d.param5,d.param6,d.param7,d.param8,d.param9,d.param10];var g=new Array;for(i=0;i<10;i++){if(f[i].length>1){if(e.find(f[i]).is("[type=text]")){g[i]=e.find(f[i]).val()}else{g[i]=e.find(f[i]).find(":selected").val()}}else{g[i]=""}}a.post(c,{value:b,param1:g[0],param2:g[1],param3:g[2],param4:g[3],param5:g[4],param6:g[5],param7:g[6],param8:g[7],param9:g[8],param10:g[9],order:d.order,limit:d.maxResults},function(b){if(l.is(":visible")){l[n](d.speed,function(){a(this).children().remove().end().prepend(b)[m](d.speed)})}else{l.children().remove().end().prepend(b)[m](d.speed)}}).error(function(){alert("There has been an error, please check your settings!")}).success(function(){if(typeof d.afterLoad=="function"){d.afterLoad.call(this)}})}var e=a(this);var f=e.find("[type=text]:first");var g=e.find("[type=submit]");var h=null;var j=a(d.target);if("ontouchstart"in b||b.DocumentTouch&&c instanceof DocumentTouch){var k="click tap"}else{var k="click"}if(j.length){j.prepend('<div class="elivesearch"/>');var l=j.children("div.elivesearch")}if(d.effect=="slide"){var m="slideDown";var n="slideUp"}else{var m="fadeIn";var n="fadeOut"}if(d.live===true){f.keyup(function(){var b=a.trim(a(this).val());var c=b.length;if(c>=d.minChar){clearTimeout(h);h=setTimeout(function(){o(b)},d.liveDelay)}else{l[n](d.speed)}})}else{e.submit(function(){var b=a.trim(a(this).find("[type=text]").val());var c=b.length;if(c>=d.minChar){o(b)}})}e.submit(function(){return false});if(d.closeClass){a("body").on(k,"."+d.closeClass,function(){a(this).parents("div.elivesearch")[n](d.speed)})}})};a.fn.eLiveSearch.options={file:"",target:"",maxResults:5,order:"random",live:true,minChar:3,liveDelay:1e3,effect:"slide",speed:400,closeClass:"",param1:"",param2:"",param3:"",param4:"",param5:"",param6:"",param7:"",param8:"",param9:"",param10:"",afterLoad:function(){}}})(jQuery,window,document)